webpackJsonp([30],{Vuly:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,o=t("mvHQ"),l=t.n(o),m={data:function(){return{activeName:"first",id:"",deviceType:"",deviceId:"",visible:!1,name1:"",newName1:"",status1:"open",name2:"",newName2:"",status2:"open",isCreate:!0,deployId:"",fullscreenLoading:!0,form:{sw:!0,stime1:"00:00",sop1:"0",stime2:"00:00",sop2:"0",stime3:"00:00",sop3:"0",stime4:"00:00",sop4:"0",stime5:"00:00",sop5:"0",stime6:"00:00",sop6:"0",stime7:"00:00",sop7:"0",stime8:"00:00",sop8:"0"},options:[{value:"0",label:"禁用"},{value:"1",label:"定时分闸"},{value:"2",label:"定时合闸"}]}},methods:{btndeploy:function(){this.visible=!0},handleClick:function(e,s){switch(e.name){case"first":this.getTime();break;case"second":this.getList()}},deploy:function(){var e=this;e.isCreate?e.ajax(e.HOST+"/v1/device/dryNode/save",{deviceId:e.deviceId,name1:e.newName1,status1:e.status1,name2:e.newName2,status2:e.status2},function(s){0==s.data.errCode&&(e.visible=!1,e.getList())},function(e){}):e.ajax(e.HOST+"/v1/device/dryNode/update",{deviceId:e.deviceId,name1:e.newName1,status1:e.status1,name2:e.newName2,status2:e.status2,id:e.deployId},function(s){0==s.data.errCode&&(e.visible=!1,e.getList())},function(e){})},getList:function(){var e=this;e.ajax(e.HOST+"/v1/device/dryNode/list",{currentPage:1,rows:10,deviceId:e.deviceId},function(s){if(0==s.data.errCode&&s.data.data.length>0){e.isCreate=!1;var t=s.data.data[0];e.name1=t.name1,e.name2=t.name2,e.newName1=t.name1,e.newName2=t.name2,e.status1=t.status1,e.status2=t.status2,e.deployId=t.id}},function(e){})},getTime:function(){var e=this;e.fullscreenLoading=!0,e.ajax(e.HOST+"/v1/parameter/readTimingConfig",{dataType:"read",devId:this.$route.query.deviceid,devType:this.$route.query.devicetype},function(e){},function(s){e.fullscreenLoading=!1,e.$message.error(e.$t("message.deviceinformation-81"))})},saveForm:function(){var e=this;e.ajax(e.HOST+"/v1/parameter/saveTimingConfig",{data:{sw:e.form.sw?"1":"0",s1:{time:e.form.stime1,op:e.form.sop1},s2:{time:e.form.stime2,op:e.form.sop2},s3:{time:e.form.stime3,op:e.form.sop3},s4:{time:e.form.stime4,op:e.form.sop4},s5:{time:e.form.stime5,op:e.form.sop5},s6:{time:e.form.stime6,op:e.form.sop6},s7:{time:e.form.stime7,op:e.form.sop7},s8:{time:e.form.stime8,op:e.form.sop8}},dataType:"write",devId:this.$route.query.deviceid,devType:this.$route.query.devicetype},function(s){e.$message({message:e.$t("message.dashboard-6"),type:"success"}),setTimeout(function(){e.getTime},1500)},function(s){e.$message.error(e.$t("message.dashboard-7"))})},websocket:function(){var e=this;(a=new WebSocket(e.wsocket)).onopen=function(){a.send(l()({userId:$.cookie("userId")}))},a.onmessage=function(s){var t,a=JSON.parse(JSON.parse(s.data).info);"TIMINGCONFIG"===a.msgType&&(t=JSON.parse(a.message),console.log(t),e.form.sw="1"===t.sw,e.form.stime1=t.s1.time,e.form.sop1=t.s1.op,e.form.stime2=t.s2.time,e.form.sop2=t.s2.op,e.form.stime3=t.s3.time,e.form.sop3=t.s3.op,e.form.stime4=t.s4.time,e.form.sop4=t.s4.op,e.form.stime5=t.s5.time,e.form.sop5=t.s5.op,e.form.stime6=t.s6.time,e.form.sop6=t.s6.op,e.form.stime7=t.s7.time,e.form.sop7=t.s7.op,e.form.stime8=t.s8.time,e.form.sop8=t.s8.op,e.fullscreenLoading=!1)},a.onclose=function(){console.log(e.$t("message.deviceinformation-82"))}}},mounted:function(){this.id=this.$route.query.id,this.deviceId=this.$route.query.deviceid,this.devicetype=this.$route.query.devicetype,this.websocket(),this.getTime()}},i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"deploy"},[t("div",{staticStyle:{margin:"0 10px"}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(s){e.activeName=s},expression:"activeName"}},[t("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{lock:!0}}],staticClass:"tabpane",attrs:{label:e.$t("message.deploy-7"),name:"first","element-loading-text":e.$t("message.realData-34")}},[t("el-form",{ref:"form",staticStyle:{"padding-left":"10px"},attrs:{model:e.form,"label-width":"150px",inline:!0}},[t("el-row",[t("el-col",{attrs:{span:4}},[t("el-form-item",[t("el-checkbox",{model:{value:e.form.sw,callback:function(s){e.$set(e.form,"sw",s)},expression:"form.sw"}},[e._v(e._s(e.$t("message.deploy-9")))])],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+1}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime1,callback:function(s){e.$set(e.form,"stime1",s)},expression:"form.stime1"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop1,callback:function(s){e.$set(e.form,"sop1",s)},expression:"form.sop1"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+2}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime2,callback:function(s){e.$set(e.form,"stime2",s)},expression:"form.stime2"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop2,callback:function(s){e.$set(e.form,"sop2",s)},expression:"form.sop2"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+3}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime3,callback:function(s){e.$set(e.form,"stime3",s)},expression:"form.stime3"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop3,callback:function(s){e.$set(e.form,"sop3",s)},expression:"form.sop3"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+4}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime4,callback:function(s){e.$set(e.form,"stime4",s)},expression:"form.stime4"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-12")},model:{value:e.form.sop4,callback:function(s){e.$set(e.form,"sop4",s)},expression:"form.sop4"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+5}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime5,callback:function(s){e.$set(e.form,"stime5",s)},expression:"form.stime5"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop5,callback:function(s){e.$set(e.form,"sop5",s)},expression:"form.sop5"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+6}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime6,callback:function(s){e.$set(e.form,"stime6",s)},expression:"form.stime6"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop6,callback:function(s){e.$set(e.form,"sop6",s)},expression:"form.sop6"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+7}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime7,callback:function(s){e.$set(e.form,"stime7",s)},expression:"form.stime7"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop7,callback:function(s){e.$set(e.form,"sop7",s)},expression:"form.sop7"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:4,span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-8")+8}},[t("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("message.deploy-12")},model:{value:e.form.stime8,callback:function(s){e.$set(e.form,"stime8",s)},expression:"form.stime8"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:e.$t("message.deploy-10")}},[t("el-select",{attrs:{placeholder:e.$t("message.deploy-11")},model:{value:e.form.sop8,callback:function(s){e.$set(e.form,"sop8",s)},expression:"form.sop8"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:2,offset:11}},[t("el-button",{attrs:{type:"primary",width:"100"},on:{click:function(s){e.saveForm()}}},[e._v(e._s(e.$t("message.menu-30")))])],1)],1)],1)],1),e._v(" "),t("el-tab-pane",{staticClass:"tabpane",attrs:{label:e.$t("message.devicemanage-16"),name:"second"}},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:4}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-1"))+"1")])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:6}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-2"))+":")]),e._v(" "),t("span",[e._v(e._s(e.name1))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:6}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-3"))+":")]),e._v(" "),t("span",[e._v(e._s("open"==e.status1?e.$t("message.deploy-4"):"close"==e.status1?e.$t("message.deploy-5"):e.$t("message.deploy-6")))])])],1),e._v(" "),t("el-row",[t("el-col",{staticClass:"item",attrs:{span:4}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-1"))+"2")])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:6}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-2"))+":")]),e._v(" "),t("span",[e._v(e._s(e.name2))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:6}},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-3"))+":")]),e._v(" "),t("span",[e._v(e._s("open"==e.status2?e.$t("message.deploy-4"):"close"==e.status2?e.$t("message.deploy-5"):e.$t("message.deploy-6")))])])],1),e._v(" "),t("el-row",[t("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:2,offset:2}},[t("el-button",{attrs:{type:"primary",width:"100"},on:{click:function(s){e.btndeploy()}}},[e._v(e._s(e.$t("message.menu-30")))])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.$t("message.menu-30"),visible:e.visible,width:"30%"},on:{"update:visible":function(s){e.visible=s}}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.$t("message.deploy-1"))+"1")]),e._v(" "),t("div",{staticClass:"input-demo-suffix"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-2"))+":")]),e._v(" "),t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.$t("message.device-11")},model:{value:e.newName1,callback:function(s){e.newName1=s},expression:"newName1"}})],1),e._v(" "),t("div",{staticClass:"input-demo-suffix"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-3"))+":")]),e._v(" "),t("span",[t("el-radio",{attrs:{label:"open"},model:{value:e.status1,callback:function(s){e.status1=s},expression:"status1"}},[e._v(e._s(e.$t("message.deploy-4")))]),e._v(" "),t("el-radio",{attrs:{label:"close"},model:{value:e.status1,callback:function(s){e.status1=s},expression:"status1"}},[e._v(e._s(e.$t("message.deploy-5")))])],1)]),e._v(" "),t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.$t("message.deploy-1"))+"2")]),e._v(" "),t("div",{staticClass:"input-demo-suffix"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-2"))+":")]),e._v(" "),t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.$t("message.device-11")},model:{value:e.newName2,callback:function(s){e.newName2=s},expression:"newName2"}})],1),e._v(" "),t("div",{staticClass:"input-demo-suffix"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("message.deploy-3"))+":")]),e._v(" "),t("span",[t("el-radio",{attrs:{label:"open"},model:{value:e.status2,callback:function(s){e.status2=s},expression:"status2"}},[e._v(e._s(e.$t("message.deploy-4")))]),e._v(" "),t("el-radio",{attrs:{label:"close"},model:{value:e.status2,callback:function(s){e.status2=s},expression:"status2"}},[e._v(e._s(e.$t("message.deploy-5")))])],1)]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.visible=!1}}},[e._v(e._s(e.$t("message.devicetype-4")))]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.deploy()}}},[e._v(e._s(e.$t("message.devicetype-8")))])],1)])],1)],1)],1)])},staticRenderFns:[]};var r=t("VU/8")(m,i,!1,function(e){t("oRE+")},"data-v-04d7d838",null);s.default=r.exports},"oRE+":function(e,s){}});