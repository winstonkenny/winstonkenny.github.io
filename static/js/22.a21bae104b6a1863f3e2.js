webpackJsonp([22],{gFdW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i("mvHQ"),a=i.n(o),s=(i("NYxO"),{name:"feesslect",data:function(){return{optionstype:[],optionsxieyi:[],tableData:[],id:"",deviceSymbolCode:"",manufactureName:"",hVersion:"",sVersion:"",customerId:"",ratedVol:"",ratedCur:"",accuracy:0,onlineurl:"../../../static/img/3-4.png",offlineurl:"../../../static/img/none.png"}},components:{check:i("0khC").a},methods:{btnselect:function(e){var t=this,i=this;-1!=e&&setTimeout(function(){t.loading.close()},2e3),e.forEach(function(e){e.xinhao=i.signals(e.band,e.csq)}),this.tableData=e},btncheck:function(e){this.$router.push({path:"/feesdetail",query:{id:e.id,deviceId:e.deviceSymbolCode}})},btnRefresh:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",target:document.querySelector(".table"),background:"#ffffff"}),this.$refs.check.getDevice()},getlisttype:function(){var e=this;e.ajax(e.HOST+"/v1/device/deviceTypeAndProtocol",{},function(t){0==t.data.errCode&&(e.optionstype=t.data.data.deviceType,e.optionsxieyi=t.data.data.protocol)},function(e){})},websocket:function(){var e=this;(n=new WebSocket(e.wsocket)).onopen=function(){n.send(a()({userId:$.cookie("userId")}))},n.onmessage=function(t){var i,n=JSON.parse(JSON.parse(t.data).info);if("NETWORKSTATUS"==n.msgType){var o=JSON.parse(n.message);i=n.deviceId,e.tableData.forEach(function(t){t.deviceSymbolCode==i&&(t.xinhao=e.signals(o.band,o.csq))})}},n.onclose=function(){console.log("连接关闭")}}},mounted:function(){this.getlisttype(),this.websocket()},destroyed:function(){n.close()}}),c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shebei"},[n("check",{ref:"check",attrs:{optionsxieyi:e.optionsxieyi,optionstype:e.optionstype},on:{select:e.btnselect}},[n("el-row",[n("el-col",[n("div",{staticClass:"icon",staticStyle:{"text-align":"right","margin-top":"10px","margin-right":"10px","margin-bottom":"10px"}},[n("i",{staticClass:"iconfont icon-shuaxin",on:{click:e.btnRefresh}},[e._v(e._s(e.$t("message.device-12")))]),e._v("  \n\t\t\t\t\t")])]),e._v(" "),n("el-col",[n("div",{staticStyle:{"margin-left":"10px"}},[n("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[n("el-table-column",{attrs:{label:e.$t("message.device-24"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("message.device-6"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return["online"==e.row.onLine?n("img",{attrs:{src:e.row.xinhao,height:"23",width:"22"}}):n("img",{attrs:{src:i("5ztV"),height:"23",width:"22"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"csq",label:"CSQ",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceName",label:e.$t("message.device-1")}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceSymbolCode",label:e.$t("message.device-4")}}),e._v(" "),n("el-table-column",{attrs:{prop:"deviceType",label:e.$t("message.device-2")}}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:e.$t("message.device-25")}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("message.device-5"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.optionsxieyi,function(i){return t.row.deviceProtocol==i.id?n("span",[e._v(e._s(i.name))]):e._e()})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"hVersion",label:e.$t("message.device-17"),width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"sVersion",label:e.$t("message.device-18"),width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("message.device-20"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.btncheck(t.row)}}},[e._v(e._s(e.$t("message.feesselect-0")))])]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(s,c,!1,function(e){i("kYkx")},"data-v-4bd39e88",null);t.default=l.exports},kYkx:function(e,t){}});