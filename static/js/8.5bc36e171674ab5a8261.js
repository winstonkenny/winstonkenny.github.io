webpackJsonp([8],{VM8h:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"group",data:function(){return{centerDialogVisible:!1,input:"",checkList:[],tableData:[],contactuser:"",phone:"",address:"",email:"",groupname:"",currentPage:1,total:0,pagesize:100,isedit:!1,id:"",emailerror:!1,phoneerror:!1}},methods:{btndetele:function(e,t,s){this.del(this.HOST+"/v1/sys/group/delete",{id:t.id},e,s)},btncancel:function(){this.input="",this.checkList=[],this.centerDialogVisible=!1},emailblur:function(){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(this.email)?(this.emailerror=!1,!0):(this.emailerror=!0,!1)},phoneblur:function(){return/^1[3|4|5|7|8][0-9]{9}$/.test(this.phone)?(this.phoneerror=!1,!0):(this.phoneerror=!0,!1)},btnconfirm:function(){var e=this;return this.groupname&&this.contactuser&&this.phone&&this.address&&this.email?!(!this.emailblur()||!this.phoneblur())&&(0==e.isedit?e.ajax(e.HOST+"/v1/sys/group/add",{address:e.address,contactPhone:e.phone,contactUser:e.contactuser,email:e.email,groupName:e.groupname,userId:$.cookie("userId"),zoneId:"0de4a939fa6a1d0adccee855",father:$.cookie("groupId")},function(t){0==t.data.errCode?(e.$message({message:e.$t("message.devicetype-12"),type:"success"}),e.getlist()):e.$message.error(e.$t("message.devicetype-15"))},function(e){}):e.ajax(e.HOST+"/v1/sys/group/add",{address:e.address,contactPhone:e.phone,contactUser:e.contactuser,email:e.email,groupName:e.groupname,userId:$.cookie("userId"),id:e.id,zoneId:"0de4a939fa6a1d0adccee855",father:$.cookie("groupId")},function(t){0==t.data.errCode?(e.$message({message:e.$t("message.devicemanage-6"),type:"success"}),e.getlist()):e.$message.error(e.$t("message.devicemanage-7"))},function(e){}),void(this.centerDialogVisible=!1)):(this.$message({message:e.$t("message.devicetype-13"),type:"warning"}),!1)},addgroup:function(){this.centerDialogVisible=!0,this.isedit=!1},close:function(){this.contactuser="",this.phone="",this.address="",this.email="",this.groupname="",this.emailerror=!1,this.phoneerror=!1},getlist:function(){var e=this;this.ajax(e.HOST+"/v1/sys/group/findAll",{currentPage:e.currentPage,rows:e.pagesize,userId:$.cookie("userId"),id:$.cookie("groupId")},function(t){0==t.data.errCode&&(e.total=t.data.totalPage,e.tableData=t.data.data)},function(e){})},handleCurrentChange:function(e){this.currentPage=e,this.getlist()},btnedit:function(e,t){this.isedit=!0,this.centerDialogVisible=!0,this.contactuser=t.contactUser,this.phone=t.contactPhone,this.address=t.address,this.email=t.email,this.groupname=t.groupName,this.id=t.id}},mounted:function(){this.getlist()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"groups"},[s("el-row",[s("el-col",{staticStyle:{"padding-top":"15px","padding-bottom":"15px",background:"#E4E7ED"}},[s("div",{staticStyle:{"margin-left":"10px"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addgroup}},[e._v(e._s(e.$t("message.user-11")))])],1)])],1),e._v(" "),s("el-row",[s("el-col",[s("div",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",fit:""}},[s("el-table-column",{attrs:{prop:"groupName",label:e.$t("message.group-0")}}),e._v(" "),s("el-table-column",{attrs:{prop:"contactUser",label:e.$t("message.group-1")}}),e._v(" "),s("el-table-column",{attrs:{prop:"contactPhone",label:e.$t("message.user-4")}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:e.$t("message.user-5")}}),e._v(" "),s("el-table-column",{attrs:{prop:"email",label:e.$t("message.user-2")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("message.device-20")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.btndetele(t.$index,t.row,e.tableData)}}},[e._v(e._s(e.$t("message.devicetype-3"))+"\n\t                            ")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.btnedit(t.$index,t.row,e.tableData)}}},[e._v(e._s(e.$t("message.devicetype-2"))+"\n\t                            ")])]}}])})],1),e._v(" "),s("div",{staticStyle:{"text-align":"right","margin-right":"20px","margin-top":"20px"}},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-count":e.total,"pager-count":11,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.close}},[s("div",{staticStyle:{"text-align":"center","vertical-align":"top"}},[s("div",{staticClass:"demo-input-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"70px","text-align-last":"justify"}},[e._v(e._s(e.$t("message.user-7"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("message.device-11"),size:"small"},model:{value:e.groupname,callback:function(t){e.groupname=t},expression:"groupname"}})],1),e._v(" "),s("div",{staticClass:"demo-input-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"70px","text-align-last":"justify"}},[e._v(e._s(e.$t("message.group-1"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("message.device-11"),size:"small"},model:{value:e.contactuser,callback:function(t){e.contactuser=t},expression:"contactuser"}})],1),e._v(" "),s("div",{staticClass:"demo-input-suffix",staticStyle:{position:"relative"}},[s("p",{staticStyle:{display:"inline-block",width:"70px","text-align-last":"justify"}},[e._v(e._s(e.$t("message.user-4"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("message.device-11"),size:"small"},on:{blur:e.phoneblur},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.phoneerror,expression:"phoneerror"}],staticStyle:{color:"red","font-size":"12px",position:"absolute"}},[e._v("手机格式错误")])],1),e._v(" "),s("div",{staticClass:"demo-input-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"70px","text-align-last":"justify"}},[e._v(e._s(e.$t("message.user-5"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("message.device-11"),size:"small"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),s("div",{staticClass:"demo-input-suffix",staticStyle:{position:"relative"}},[s("p",{staticStyle:{display:"inline-block",width:"70px","text-align-last":"justify"}},[e._v(e._s(e.$t("message.user-2"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("message.device-11"),size:"small"},on:{blur:e.emailblur},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.emailerror,expression:"emailerror"}],staticStyle:{color:"red","font-size":"12px",position:"absolute"}},[e._v("邮箱格式错误")])],1)]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:e.btncancel}},[e._v(e._s(e.$t("message.devicetype-4")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnconfirm}},[e._v(e._s(e.$t("message.devicetype-8")))])],1)])],1)},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(e){s("pxyJ")},"data-v-e1658b4a",null);t.default=l.exports},pxyJ:function(e,t){}});