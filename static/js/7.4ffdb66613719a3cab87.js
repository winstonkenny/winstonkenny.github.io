webpackJsonp([7],{ICz0:function(e,t){},"SYG/":function(e,t){},gwz7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"user",data:function(){return{pswDialogVisible:!1,centerDialogVisible:!1,adminPassword:"",adminAccount:"",innerVisible:!1,id:"",tableData:[],userAccount:"",password:"",email:"",name:"",phone:"",address:"",roleId:"",options:[],disabled:"false",isedit:"false",roledata:[],groupname:"",groupId:"",group:[{id:$.cookie("groupId"),groupName:this.$t("message.user-13")}],grouparr:[],pagesize:100,currentPage:1,total:0,emailerror:!1,phoneerror:!1}},components:{tree:s("pl2G").a},methods:{btndetele:function(e,t,s){this.del(this.HOST+"/v1/sys/user/delete",{id:t.id},e,s)},close:function(){this.userAccount="",this.password="",this.email="",this.name="",this.phone="",this.roleId="",this.address="",this.disabled="false",this.groupId="",this.emailerror=!1,this.phoneerror=!1},emailblur:function(){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(this.email)?(this.emailerror=!1,!0):(this.emailerror=!0,!1)},phoneblur:function(){return/^1[3|4|5|7|8][0-9]{9}$/.test(this.phone)?(this.phoneerror=!1,!0):(this.phoneerror=!0,!1)},btnconfirm:function(){var e=this;if(!(this.userAccount&&this.email&&this.name&&this.phone&&this.roleId&&this.address))return this.$message({message:e.$t("message.devicemanage-5"),type:"warning"}),!1;if(!this.emailblur()||!this.phoneblur())return!1;e=this;"false"==this.isedit?e.ajax(e.HOST+"/v1/sys/user/add",{address:e.address,disabled:e.disabled,email:e.email,name:e.name,password:e.password,phone:e.phone,roleId:e.roleId,userAccount:e.userAccount,groupId:e.groupId?e.groupId:""},function(t){0==t.data.errCode&&(e.$message({message:e.$t("message.devicetype-12"),type:"success"}),e.getusrlist())},function(e){}):e.ajax(e.HOST+"/v1/sys/user/updateInfo",{address:e.address,disabled:e.disabled,email:e.email,name:e.name,phone:e.phone,roleId:e.roleId,userAccount:e.userAccount,id:e.id,groupId:e.groupId?e.groupId:""},function(t){0==t.data.errCode&&(e.$message({message:e.$t("message.devicemanage-6"),type:"success"}),e.getusrlist())},function(e){}),e.centerDialogVisible=!1},adduser:function(){this.centerDialogVisible=!0,this.isedit="false"},btndedit:function(e,t){this.id=t.id,this.centerDialogVisible=!0,this.isedit="true",this.address=t.address,t.disabled?this.disabled="true":this.disabled="false",this.email=t.email,this.name=t.name,this.phone=t.phone,this.roleId=t.roleId,this.groupId=t.groupId,this.roleId=t.roleId,this.userAccount=t.userAccount},btnregist:function(e,t){this.pswDialogVisible=!0,this.userAccount=t.userAccount,this.groupId=t.groupId},resetPsw:function(){var e=this;e.ajax(e.HOST+"/v1/sys/user/resetPwd",{adminAccount:e.adminAccount,adminPassword:e.adminPassword,userAccount:e.userAccount,groupId:e.groupId?e.groupId:""},function(t){0==t.data.errCode&&(e.$message({message:e.$t("message.devicemanage-6"),type:"success"}),e.getusrlist())},function(e){}),this.pswDialogVisible=!1},getrolelist:function(){var e=this;e.ajax(e.HOST+"/v1/sys/role/findAll",{userId:$.cookie("userId"),currentPage:1,rows:1e3},function(t){0==t.data.errCode&&(e.options=t.data.data,t.data.data.forEach(function(t){e.roledata[t.roleId]=t.name}))},function(e){})},getusrlist:function(){var e=this;e.ajax(e.HOST+"/v1/sys/user/userList",{id:$.cookie("userId"),currentPage:e.currentPage,rows:e.pagesize},function(t){0==t.data.errCode&&(e.tableData=t.data.data,e.total=t.data.totalPage)},function(e){})},getgrouplist:function(){var e=this;this.ajax(e.HOST+"/v1/sys/group/findAll",{currentPage:1,rows:100,id:$.cookie("groupId")},function(t){0==t.data.errCode?(t.data.data.forEach(function(t){e.grouparr[t.id]=t.groupName}),e.grouparr[$.cookie("groupId")]=$.cookie("groupName"),e.group=e.group.concat(t.data.data),e.getusrlist()):e.getusrlist()},function(t){e.getusrlist()})},getgroupname:function(e){return this.grouparr[e]},handleCurrentChange:function(e){this.currentPage=e,this.getusrlist()}},mounted:function(){this.getgrouplist(),this.getrolelist()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"usermanage"},[s("el-row",[s("el-col",{staticStyle:{"padding-top":"15px","padding-bottom":"15px",background:"#E4E7ED"}},[s("div",{staticStyle:{"margin-left":"10px"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.adduser}},[e._v(e._s(e.$t("message.user-0")))])],1)])],1),e._v(" "),s("el-row",[s("el-col",[s("div",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",fit:""}},[s("el-table-column",{attrs:{prop:"userAccount",label:e.$t("message.user-1")}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:e.$t("message.user-3")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("message.user-7")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.getgroupname(t.row.groupId)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"email",label:e.$t("message.user-2")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("message.user-8")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.disabled?s("span",[e._v(e._s(e.$t("message.user-12")))]):s("span",[e._v(e._s(e.$t("message.user-9")))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"phone",label:e.$t("message.user-4")}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:e.$t("message.user-5")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("message.device-20"),width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.btndetele(t.$index,t.row,e.tableData)}}},[e._v(e._s(e.$t("message.devicetype-3")))]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.btndedit(t.$index,t.row)}}},[e._v(e._s(e.$t("message.devicetype-2")))]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.btnregist(t.$index,t.row)}}},[e._v(e._s(e.$t("message.common-15")))])]}}])})],1),e._v(" "),s("div",{staticStyle:{"text-align":"right","margin-right":"20px","margin-top":"20px"}},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-count":e.total,"pager-count":11,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("message.user-10"),visible:e.centerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.close}},[s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-1"))+":")]),e._v(" "),s("el-input",{staticClass:"elinput",attrs:{placeholder:e.$t("message.device-11"),disabled:"false"!=e.isedit},model:{value:e.userAccount,callback:function(t){e.userAccount=t},expression:"userAccount"}})],1),e._v(" "),s("div",{staticClass:"input-demo-suffix",staticStyle:{position:"relative"}},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-2"))+":")]),e._v(" "),s("el-input",{staticClass:"elinput",attrs:{placeholder:e.$t("message.device-11")},on:{blur:e.emailblur},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.emailerror,expression:"emailerror"}],staticStyle:{color:"red","font-size":"12px",position:"absolute"}},[e._v(e._s(e.$t("message.user-14")))])],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-3"))+":")]),e._v(" "),s("el-input",{staticClass:"elinput",attrs:{placeholder:e.$t("message.device-11")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),s("div",{staticClass:"input-demo-suffix",staticStyle:{position:"relative"}},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-4"))+":")]),e._v(" "),s("el-input",{staticClass:"elinput",attrs:{placeholder:e.$t("message.device-11")},on:{blur:e.phoneblur},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.phoneerror,expression:"phoneerror"}],staticStyle:{color:"red","font-size":"12px",position:"absolute"}},[e._v(e._s(e.$t("message.user-15")))])],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-5"))+":")]),e._v(" "),s("el-input",{staticClass:"elinput",attrs:{placeholder:e.$t("message.device-11")},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-6"))+":")]),e._v(" "),s("el-select",{staticClass:"select",attrs:{filterable:"",placeholder:e.$t("message.historyalarm-0")},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.options,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"90px","text-align":"right"}},[e._v(e._s(e.$t("message.user-7"))+":")]),e._v(" "),s("el-select",{staticClass:"select",attrs:{filterable:"",placeholder:e.$t("message.historyalarm-0"),"value-key":"id"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.group,function(e){return s("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})}))],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("p",{staticStyle:{display:"inline-block",width:"98px","text-align":"right"}},[e._v(e._s(e.$t("message.user-8"))+":")]),e._v(" "),s("div",{staticClass:"radiobool"},[s("el-radio",{attrs:{label:"false"},model:{value:e.disabled,callback:function(t){e.disabled=t},expression:"disabled"}},[e._v(e._s(e.$t("message.user-9")))]),e._v(" "),s("el-radio",{attrs:{label:"true"},model:{value:e.disabled,callback:function(t){e.disabled=t},expression:"disabled"}},[e._v(e._s(e.$t("message.user-12")))])],1)]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v(e._s(e.$t("message.devicetype-4")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.btnconfirm}},[e._v(e._s(e.$t("message.devicetype-8")))])],1)]),e._v(" "),s("el-dialog",{attrs:{title:e.$t("message.common-15"),visible:e.pswDialogVisible,width:"30%"},on:{"update:visible":function(t){e.pswDialogVisible=t}}},[s("div",{staticClass:"input-demo-suffix"},[s("span",{staticStyle:{width:"74px",display:"inline-block"}},[e._v(e._s(e.$t("message.feesdetail-13"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.$t("message.device-11")},model:{value:e.adminAccount,callback:function(t){e.adminAccount=t},expression:"adminAccount"}})],1),e._v(" "),s("div",{staticClass:"input-demo-suffix"},[s("span",[e._v(e._s(e.$t("message.common-18"))+":")]),e._v(" "),s("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.$t("message.device-11"),type:"password"},model:{value:e.adminPassword,callback:function(t){e.adminPassword=t},expression:"adminPassword"}})],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.pswDialogVisible=!1}}},[e._v(e._s(e.$t("message.devicetype-4")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.resetPsw}},[e._v(e._s(e.$t("message.devicetype-8")))])],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(e){s("ICz0")},"data-v-00bdcfe2",null);t.default=r.exports},pl2G:function(e,t,s){"use strict";var a=s("BO1k"),i=s.n(a);function r(e,t){for(var s={},a=0;a<e.length;a++){var r=e[a].parentId;s[r]?s[r].push(e[a]):(s[r]=[],s[r].push(e[a]))}return function e(t,s){var a=[];if(!t[s])return a;var r=!0;var l=!1;var n=void 0;try{for(var o,d=i()(t[s]);!(r=(o=d.next()).done);r=!0){var u=o.value;u.children=e(t,u.id),a.push(u)}}catch(e){l=!0,n=e}finally{try{!r&&d.return&&d.return()}finally{if(l)throw n}}return a}(s,t)}var l={data:function(){return{props:{label:"name",children:"children"},data:[]}},methods:{check:function(){var e=this.$refs.tree.getCheckedNodes(),t=this.$refs.tree.getHalfCheckedNodes(),s=e.concat(t);this.$emit("dataRecieve",s)},getlist:function(){var e=this;e.ajax(e.HOST+"/v1/sys/menu/findAll",{userId:$.cookie("userId")},function(t){if(0==t.data.errCode){var s=r(t.data.data,"#");e.data=s}},function(e){})}},props:{menus:{type:Array}},mounted:function(){this.getlist()}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{border:"1px solid #d1dbe5"}},[t("el-tree",{ref:"tree",attrs:{props:this.props,data:this.data,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":this.menus},on:{check:this.check}})],1)},staticRenderFns:[]};var o=s("VU/8")(l,n,!1,function(e){s("SYG/")},null,null);t.a=o.exports}});